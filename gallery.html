<!DOCTYPE html>
<html lang="en">
<div class="scroll-progress"></div>

<style>
    .scroll-progress {
        height: 3px;
        background: #3498db;
        position: fixed;
        top: 0;
        left: 0;
        z-index: 9999;
    }
</style>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sinan (R1 Researcher)</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- MathJax for equations -->
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body>
    <!-- Hero Section -->
    <!-- HTML -->
    <header class="academic-header">
        <div class="header-container">
            <!-- Profile Section -->
            <div class="profile-section">
                <div class="profile-image-container">
                    <img src="assets/img2.jpg" alt="Your Name" class="profile-img">
                    <div class="status-indicator"></div>
                </div>
                <div class="profile-info">
                    <h1 class="name">Muhammad Sinan</h1>
                    <p class="position">First Stage Researcher (R1)</p>
                    <div class="affiliation">
                        <img src="assets/logo-ippt.png" alt="University Logo" class="affiliation-logo">
                        <div class="affiliation-details">
                            <span class="university-name">Polish Academy of Sciences</span>
                            <span class="department">Institute of Fundamental and Technological Researcher</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="action-buttons">
                <!-- In your header's contact button -->
                <button class="contact-btn" onclick="smoothScroll('contact-form')">
                    <i class="fas fa-envelope"></i>
                    Contact
                </button>
                <a href="./assets/docs/Muhammad sinan cv.pdf" download class="cv-btn">
                    <i class="fas fa-download"></i>
                    Download CV
                </a>
                <a href="https://scholar.google.com/citations?user=ID&user=qoeSgwkAAAAJ" class="scholar-btn">
                    <i class="ai ai-google-scholar ai-3x" style="font-size: 32px;"></i>
                    Scholar Profile
                </a>
            </div>
        </div>

        <!-- Navigation -->
        <nav class="academic-nav">
            <ul>
                <li><a href="./index.html" class="active">Overview</a></li>
                <li><a href="./publicationList.html">Publications</a></li>
                <li><a href="./gallery.html">Gallery</a></li>
            </ul>
        </nav>
    </header>
    
    <style>
        :root {
            --gutter: 1rem;
            --columns: 4;
        }

        .gallery {
            display: grid;
            grid-template-columns: repeat(var(--columns), 1fr);
            gap: var(--gutter);
            padding: 2rem;
            max-width: 1600px;
            margin: 0 auto;
        }

        .gallery-item {
            position: relative;
            aspect-ratio: 4/3;
            overflow: hidden;
            border-radius: 8px;
            background: #f8f9fa;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .gallery-media {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: opacity 0.3s ease;
        }

        .loading-spinner {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }

        /* Lightbox styles remain similar to previous version */
    </style>
</head>
<body>
    <div class="gallery" id="gallery">
        <div class="loading-spinner"></div>
    </div>

    <script>
        // Configuration - Replace with your GitHub details
        const GITHUB_USER = 'sinanlab';
        const REPO_NAME = 'sinanlab.github.io';
        const BRANCH = 'main';
        const IMAGE_FOLDER = 'images/';
        const THUMB_FOLDER = 'thumbs/';

        // GitHub Content API URL Builder
        function createApiUrl(path) {
            return `https://api.github.com/repos/${GITHUB_USER}/${REPO_NAME}/contents/${path}?ref=${BRANCH}`;
        }

        // Fetch image list automatically
        async function fetchImageList() {
            try {
                const response = await fetch(createApiUrl(THUMB_FOLDER));
                const files = await response.json();
                
                return files
                    .filter(file => /\.(jpg|jpeg|png|webp)$/i.test(file.name))
                    .map(file => file.name);
            } catch (error) {
                console.error('Error fetching images:', error);
                return [];
            }
        }

        // Generate media element with progressive loading
        function createMediaElement(filename) {
            const container = document.createElement('div');
            container.className = 'gallery-item';
            
            const media = document.createElement('img');
            media.className = 'gallery-media';
            media.loading = 'lazy';
            media.decoding = 'async';
            media.alt = `Research image: ${filename}`;

            // WebP detection
            const webpSupported = document.createElement('canvas').toDataURL('image/webp').indexOf('data:image/webp') === 0;
            
            // Adaptive image sources
            const thumbSrc = `https://raw.githubusercontent.com/${GITHUB_USER}/${REPO_NAME}/${BRANCH}/${THUMB_FOLDER}${filename}`;
            const fullSrc = `https://raw.githubusercontent.com/${GITHUB_USER}/${REPO_NAME}/${BRANCH}/${IMAGE_FOLDER}${filename}`;

            media.src = thumbSrc;
            media.dataset.full = fullSrc;

            // Progressive loading
            const fullImage = new Image();
            fullImage.src = fullSrc;
            fullImage.onload = () => {
                media.src = fullSrc;
                media.style.opacity = 1;
            };

            media.addEventListener('click', () => showLightbox(fullSrc));
            container.appendChild(media);
            
            return container;
        }

        // Initialize gallery
        async function initGallery() {
            const gallery = document.getElementById('gallery');
            gallery.innerHTML = ''; // Clear loading spinner
            
            const images = await fetchImageList();
            
            if(images.length === 0) {
                gallery.innerHTML = '<p>No images found in repository</p>';
                return;
            }

            const fragment = document.createDocumentFragment();
            
            images.forEach(filename => {
                fragment.appendChild(createMediaElement(filename));
            });

            gallery.appendChild(fragment);
        }

        // Lightbox functions remain similar
        // Initialize on load
        window.addEventListener('DOMContentLoaded', initGallery);
    </script>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.6.2/fuse.min.js"></script>
    <script src="app.js"></script>

</body>
</html>